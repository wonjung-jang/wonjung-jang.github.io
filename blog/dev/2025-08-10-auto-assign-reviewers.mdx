---
title: GitHub Actions을 활용한 리뷰어 자동 할당
description: GitHub Actions을 활용해서 리뷰어 자동 할당 기능을 만든 경험에 대한 기록입니다.
slug: 2025-08-10-auto-asign-reviewers
authors: wonjung
tags: [GitActions, AutoAssignReviewer]
hide_table_of_contents: false
---

import ImageSlider from "@site/src/components/ImageSlider";

사내에서 PR을 작성할 때 리뷰어를 할당한다.
피처 개발에 대한 PR인지, 이슈를 처리하는 PR인지, 피처 외의 개발에 대한 PR인지에 따라 리뷰어를 할당하는 방식이 조금씩 다르다.
예를 들면 피처 개발에 대한 PR이면 보통 같은 팀 프론트엔드 개발자분들을 리뷰어로 할당한다.

기존에는 리뷰어를 수동으로 지정해 줘야 했다.
이런 점이 은근히 불편했는데, 피처를 조금 빨리 쳐낸 시점에서 다른 분들도 동일한 불편함을 느끼고 있다는 얘기를 들었다.
누구를 리뷰어로 할지, GitHub Profile Name을 `이름 (n팀 프론트)`로 하도록 규칙이 정해져 있기 때문에 규칙을 잘 활용하면 리뷰어를 자동으로 할당할 수 있겠다고 생각했다.

## GitHub Actions

GitHub Actions는 CI/CD로 많이 활용되지만, 리포지토리에 다른 이벤트가 발생할 때 워크플로를 실행할 수 있는 기능 또한 제공한다.
예를 들어 PR이 생성됐을 때마다 워크플로를 실행하여 자동으로 라벨을 붙여준다던가, 리뷰어를 할당해 줄 수 있다.

<ImageSlider
  images={[
    {
      src: "/blog/dev/2025-08-10-auto-assign-reviewers/github-actions.png",
      alt: "GitHub Actions가 실행되 걸 설명하는 이미지",
      height: "400px",
    },
  ]}
  description="GitHub Docs 공식 문서에서 가져온 이미지"
/>

이벤트(PR이나 이슈가 생성 등)가 리포지토리에 발생할 때 트리거 되도록 워크플로를 구성할 수 있다.
워크 플로는 순차적 또는 병렬로 실행할 수 있는 `jobs(이하 작업)`를 하나 이상 포함한다.
각 작업은 자체 가상 머신 러너 또는 컨테이너에서 실행되며 스크립트를 실행하거나 작업을 실행하는 `step(이하 단계)`을 하나 이상 포함한다.

### Workflows

워크플로는 리포지토리에 체크인된 YAML 파일에서 정의되며, 리포지토리의 이벤트로 트리거될 때 실행되거나 수동 또는 정의된 일정에 따라 트리거될 수 있다.

워크플로는 리포지토리의 `.github/workflows` 폴더에 정의된다.
해당 폴더에 각각의 다른 작업을 수행하는 여러 워크플로가 있을 수 있다.

### Jobs

작업은 동일한 실행기에서 실행되는 워크플로의 단계 집합이다.
각 단계는 실행되는 shell script이거나 실행될 액션이다.
단계는 순서대로 실행되며 서로 종속된다.
각 단계가 같은 러너에서 실행되므로 단계 간에 데이터를 공유할 수 있다.
나의 경우 한 단계에서 Organization에서 member 목록을 가져와 프론트 엔드 개발자만 필터링한 뒤 다른 단계에서 해당 데이터를 받아 팀별로 분류하는 식으로 활용했다.

작업 간 종속성을 구성할 수도 있다.
기본적으로 각 작업은 종속성이 없으며 병렬로 실행된다.
작업이 다른 작업에 종속되면 실행하기 전에 종속된 작업이 완료되기를 기다린다.
예를 들어 라벨을 추가하는 작업을 실행한 뒤에 리뷰어를 할당하는 작업을 실행할 수 있다.
나의 경우에 처음에는 리뷰어 할당 작업을 라벨 추가 작업에 종속시켜 라벨이 추가되면 라벨에 따라 리뷰어 할당을 하려고 했었다.
결과적으로는 종속이 필요없을 거로 생각해서 바꾸긴 했지만, 어쨌든 종속시킬 수 있다.

## [actions/github-script](https://github.com/marketplace/actions/github-script)

`actions/github-script`는 GitHub Actions 워크플로에서 JavaScript 코드를 직접 실행할 수 있게 해주는 공식 액션이다.

```yml
name: Comment on PR

on:
  pull_request:
    types: [opened]

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'Hello World!'
            })
```

예를 들어 위와 같이 작성하면 PR이 열렸을 때 본문에 "Hello World!"라는 댓글을 자동으로 남길 수 있다.
이 액션을 사용하면 프론트엔드 개발자가 익숙한 JavaScript로 GitHub REST API를 사용할 수 있다.
나도 리뷰어 자동 할당 기능을 PR이 열렸을 때를 기준으로 작성했다.

### Contexts

컨텍스트는 GitHub Actions 워크플로에서 사용할 수 있는 전역 객체다.
`actions/github-script`에서 해당 객체를 통해 여러 정보를 가져올 수 있다.
나는 PR 정보를 context 객체로 부터 받아와 현재 브랜치명을 검사하여 어떤 리뷰어를 할당할지 결정했다.

## 결론

위에 나온 기능들을 활용하여 JavaScript 코드로 PR 정보를 가져와 이를 토대로 리뷰어 자동 할당 기능을 만들었다.
단계별로 설명하면

1. PR 정보에서 브랜치명을 가져와 분기 기준 만들기
2. PR 작성 시에 할당한 리뷰어가 있는지 검사
3. Organization에서 member 목록을 순회하며 팀 정보 할당
4. 1에서 만든 분기 기준으로 같은 팀을 리뷰어 할당하거나 전체 프론트엔드 개발자를 리뷰어로 할당

하도록 작성했다.
Organization에서 member 목록을 받아올 때 주의할 점이 있다.
Organization 접근은 GitHub Actions에서 기본적으로 제공하는 권한 밖이기 때문에 orgs 접근 권한을 갖는 Personal Token을 등록하여 사용해야 한다.
또한 GitHub REST API를 통해 member 목록을 받아올 때 30명 이상이라면, `paginate`를 통해 받아와야 한다.

위에서 설명한 기능들을 활용하면 누구나 쉽게 자동 리뷰어 할당 기능을 만들 수 있다.
GitHub Actions를 사용할 때 shell script만 사용할 수 있는 줄 알았지만 `actions/github-script`을 사용하면 JavaScript 코드로 작성할 수 있어 진입 장벽이 낮다.
마무리를 어떻게 지어야 할지 모르겠다.
끝!
